核心概念
=========

本文档介绍 Agent-Skill-MCP Framework 的核心概念和组件。

Agent（代理）
-------------

**Agent** 是框架的核心组件，负责管理技能和处理请求。每个代理可以：

- **管理技能**：添加、移除、获取技能
- **执行技能**：调用技能的执行方法，处理技能的执行过程
- **处理异常**：捕获和处理技能执行过程中的异常
- **管理状态**：维护自身的运行状态

代理的主要职责是协调不同技能的执行，根据用户需求选择合适的技能，并处理技能之间的交互。

Skill（技能）
-------------

**Skill** 是封装特定功能的可执行单元，每个技能包含：

- **名称**：技能的唯一标识符
- **描述**：技能的功能描述
- **执行方法**：技能的核心逻辑
- **验证方法**：验证输入参数的有效性
- **元数据**：技能的版本、作者等信息

技能是框架的功能单元，通过实现不同的技能，可以扩展框架的能力。

MCP（模型控制协议）
---------------------

**MCP** (Model Control Protocol) 是与大模型交互的标准化接口，负责：

- **生成文本**：根据提示生成文本内容
- **对话**：处理多轮对话
- **生成嵌入**：将文本转换为向量表示
- **管理连接**：处理与模型服务的连接和认证

MCP 屏蔽了不同大模型服务的差异，为框架提供了统一的模型交互接口。

配置管理
---------

框架使用 **配置管理系统** 来管理各种配置参数，包括：

- **环境变量**：通过 ``.env`` 文件或系统环境变量配置
- **配置类**：使用 Pydantic 模型定义配置结构
- **默认值**：为配置项提供合理的默认值

配置管理系统确保了框架的灵活性和可配置性。

日志系统
---------

框架集成了 **统一的日志系统**，提供：

- **多级别日志**：支持 DEBUG、INFO、WARNING、ERROR、CRITICAL 级别
- **多输出目标**：控制台和文件输出
- **结构化日志**：包含时间、级别、模块、行号等信息
- **日志轮转**：自动管理日志文件大小和保留时间

日志系统帮助开发者和运维人员监控框架的运行状态和排查问题。

异常处理
---------

框架实现了 **统一的异常处理机制**，包括：

- **基础异常类**：所有异常的基类
- **具体异常类型**：针对不同场景的具体异常
- **异常信息**：包含错误代码、错误信息和详细信息
- **异常转换**：将底层异常转换为框架异常

异常处理机制提高了框架的可靠性和可维护性。

工具函数
---------

框架提供了 **丰富的工具函数**，包括：

- **重试机制**：自动重试失败的操作
- **超时控制**：限制操作的执行时间
- **参数验证**：验证输入参数的有效性
- **JSON 序列化/反序列化**：处理 JSON 数据

工具函数简化了常见操作的实现，提高了代码的可读性和可维护性。

组件关系
---------

.. code-block::

    +----------------+     +----------------+     +----------------+
    |                |     |                |     |                |
    |     Agent      |<--->|     Skill      |     |     MCP        |
    |                |     |                |<--->|                |
    +----------------+     +----------------+     +----------------+
            ^                      ^                      ^
            |                      |                      |
            v                      v                      v
    +----------------+     +----------------+     +----------------+
    |                |     |                |     |                |
    |  Config System |     |  Utils        |     |  OpenAI API    |
    |                |     |                |     |                |
    +----------------+     +----------------+     +----------------+
            ^                      ^
            |                      |
            v                      v
    +----------------+     +----------------+
    |                |     |                |
    |  Logger        |     |  Exceptions    |
    |                |     |                |
    +----------------+     +----------------+

以上是框架的核心概念和组件关系，理解这些概念有助于您更好地使用和扩展框架。
